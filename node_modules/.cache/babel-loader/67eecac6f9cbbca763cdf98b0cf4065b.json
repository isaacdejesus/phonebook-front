{"ast":null,"code":"import _objectSpread from\"/home/isaac/git/react_stuff/phonebook/phonebook-front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/isaac/git/react_stuff/phonebook/phonebook-front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import axios from'axios';import personsService from'./services/persons.js';import PersonForm from'./components/PersonForm.js';import GoodNotif from'./components/GoodNotif';import BadNotif from'./components/BadNotif';import Records from'./components/Records.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newPhone=_useState6[0],setNewPhone=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),successMsg=_useState8[0],setSuccessMsg=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),errMsg=_useState10[0],setErrMsg=_useState10[1];useEffect(function(){personsService.getAll().then(function(response){setPersons(response);});},[]);var handleNewPerson=function handleNewPerson(event){setNewName(event.target.value);};var handleNewPhone=function handleNewPhone(event){setNewPhone(event.target.value);};var handleSubmit=function handleSubmit(event){event.preventDefault();var checkName=persons.find(function(person){return person.name===newName;});if(checkName){var updateNum=window.confirm(\"\".concat(newName,\" is already in the phonebook. would you like to replace the old number with the new one?\"));if(!updateNum)return;var updatedPerson=_objectSpread(_objectSpread({},checkName),{},{number:newPhone});personsService.update(checkName.id,updatedPerson).then(function(returnedPerson){setPersons(persons.map(function(person){return person.id!==checkName.id?person:returnedPerson;}));setNewName('');setNewPhone('');setSuccessMsg(\"Record '\".concat(checkName.name,\"' successfully updated\"));setTimeout(function(){setSuccessMsg(null);},2000);}).catch(function(error){setErrMsg(\"Record does not exist\");setTimeout(function(){setErrMsg(null);},3000);setPersons(persons.filter(function(person){return person.id!==checkName.id;}));setNewName('');setNewPhone('');});}else if(!checkName){var newPerson={name:newName,number:newPhone,id:persons.length+1};personsService.create(newPerson).then(function(returnedPerson){console.log(\"promise success\");setPersons(persons.concat(returnedPerson));setSuccessMsg(\"Record '\".concat(returnedPerson.name,\"' has been added\"));setTimeout(function(){setSuccessMsg(null);},3000);setNewName('');setNewPhone('');//setPersons(persons.concat(newPerson))\n}).catch(function(error){alert(\"somethi\");});}};var handleDel=function handleDel(id){var maybe=window.confirm(\"Do you really want to delete record?\");if(!maybe)return;var toDel=persons.find(function(person){return person.id===id;});//console.log(toDel.name)\npersonsService.del(id).then(function(persontoDel){setPersons(persons.filter(function(person){return person.id!==toDel.id;}));}).catch(function(error){alert(\"person '\".concat(toDel.name,\"' has already been deleted\"));setPersons(persons.filter(function(person){return person.id!==toDel.id;}));});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\" Phonebook \"}),/*#__PURE__*/_jsx(GoodNotif,{message:successMsg}),/*#__PURE__*/_jsx(BadNotif,{message:errMsg}),/*#__PURE__*/_jsx(PersonForm,{newName:newName,newPhone:newPhone,handleNewPhone:handleNewPhone,handleNewPerson:handleNewPerson,handleSubmit:handleSubmit}),/*#__PURE__*/_jsx(\"h3\",{children:\" Records \"}),/*#__PURE__*/_jsx(Records,{persons:persons,handleDel:handleDel})]});};export default App;","map":{"version":3,"sources":["/home/isaac/git/react_stuff/phonebook/phonebook-front/src/App.js"],"names":["useState","useEffect","axios","personsService","PersonForm","GoodNotif","BadNotif","Records","App","persons","setPersons","newName","setNewName","newPhone","setNewPhone","successMsg","setSuccessMsg","errMsg","setErrMsg","getAll","then","response","handleNewPerson","event","target","value","handleNewPhone","handleSubmit","preventDefault","checkName","find","person","name","updateNum","window","confirm","updatedPerson","number","update","id","returnedPerson","map","setTimeout","catch","error","filter","newPerson","length","create","console","log","concat","alert","handleDel","maybe","toDel","del","persontoDel"],"mappings":"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","sourcesContent":["import {useState, useEffect} from 'react'\nimport axios from 'axios'\nimport personsService from './services/persons.js'\nimport PersonForm from './components/PersonForm.js'\nimport GoodNotif from './components/GoodNotif'\nimport BadNotif from './components/BadNotif'\nimport Records from './components/Records.js'\nconst App = () => {\n    const [persons, setPersons] = useState([])\n    const [newName, setNewName] = useState('')\n    const [newPhone, setNewPhone] = useState('')\n    const [successMsg, setSuccessMsg] = useState(null)\n    const [errMsg, setErrMsg] = useState(null)\n    useEffect(() => {\n            personsService\n            .getAll()\n            .then(response => {\n                setPersons(response)\n            })\n    }, [])\n    const handleNewPerson = (event) => {\n        setNewName(event.target.value) \n    }\n    const handleNewPhone = (event) => {\n        setNewPhone(event.target.value)\n    }\n    const handleSubmit = (event) => {\n        event.preventDefault()\n        const checkName = persons.find(person => person.name === newName)\n        if(checkName){\n            const updateNum = window.confirm(`${newName} is already in the phonebook. would you like to replace the old number with the new one?`)\n            if(!updateNum)\n                return\n            const updatedPerson = { ...checkName, number:newPhone  }\n            personsService\n                .update(checkName.id, updatedPerson)\n                .then(returnedPerson => {\n                    setPersons(persons.map(person => person.id !== checkName.id ? person : returnedPerson))\n                    setNewName('')\n                    setNewPhone('')\n                    setSuccessMsg(`Record '${checkName.name}' successfully updated`)\n                    setTimeout(() => {\n                        setSuccessMsg(null)\n                    }, 2000)\n                })\n                .catch(error => {\n                    setErrMsg(`Record does not exist`)\n                    setTimeout(() => {\n                    setErrMsg(null)\n                    }, 3000);\n                    setPersons(persons.filter(person => person.id !==checkName.id))\n                    setNewName('')\n                    setNewPhone('')\n                })\n        }\n        else if(!checkName){\n        const newPerson = {\n            name: newName,\n            number: newPhone,\n            id: persons.length+ 1\n        }\n        personsService\n            .create(newPerson)\n            .then(returnedPerson => {\n                console.log(\"promise success\")\n                setPersons(persons.concat(returnedPerson))\n                setSuccessMsg(`Record '${returnedPerson.name}' has been added`)\n                setTimeout(() => {\n                    setSuccessMsg(null)\n                }, 3000)\n                setNewName('')\n                setNewPhone('')\n                //setPersons(persons.concat(newPerson))\n                })\n            .catch(error => {\n                alert(\"somethi\")\n            })\n            }\n    }\n    const handleDel = id => {\n        const maybe = window.confirm(\"Do you really want to delete record?\")\n        if(!maybe)\n            return\n        const toDel = persons.find(person => person.id === id)\n        //console.log(toDel.name)\n        personsService\n            .del(id)\n            .then(persontoDel => {\n                setPersons(persons.filter(person => person.id !== toDel.id ))\n            })\n            .catch(error => {\n                alert(`person '${toDel.name}' has already been deleted`)\n                setPersons(persons.filter(person => person.id !== toDel.id ))\n            })\n    }\n   return(\n        <div>\n            <h2> Phonebook </h2>\n            <GoodNotif message = {successMsg}/>\n            <BadNotif message={errMsg}/>\n            <PersonForm \n                newName = {newName}\n                newPhone = {newPhone}\n                handleNewPhone = {handleNewPhone}\n                handleNewPerson = {handleNewPerson}\n                handleSubmit = {handleSubmit}\n            />\n            <h3> Records </h3>\n            <Records persons = {persons} handleDel= {handleDel}/>\n        </div>\n    )\n}\n\nexport default App\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}